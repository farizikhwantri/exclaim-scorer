openapi: 3.0.3
info:
  title: LLM Explanation Scorer API
  version: 0.1.0
paths:
  /score:
    post:
      summary: Score an assurance case document
      description: Linearizes the argument structure, computes explanation scores, and returns the JSON with scores injected.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScoreRequest"
            examples:
              minimal:
                value:
                  model_type: decoder
                  model_name: gpt2
                  task: null
                  assurance_case_json:
                    Claim:
                      description: "Test claim"
                      SubClaims: []
      responses:
        "200":
          description: Scored JSON
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScoreResponse"
components:
  schemas:
    ScoreRequest:
      type: object
      required: [model_type, model_name, assurance_case_json]
      properties:
        model_type:
          type: string
          enum: [encoder, decoder]
        model_name:
          type: string
        task:
          type: string
          nullable: true
        assurance_case_json:
          type: object
          description: Assurance case JSON without scores
    ScoreResponse:
      type: object
      required: [model_type, model_name, scored_json]
      properties:
        model_type:
          type: string
        model_name:
          type: string
        scored_json:
          type: object